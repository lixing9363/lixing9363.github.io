(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{455:function(s,e,a){"use strict";a.r(e);var t=a(24),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"cookie和session"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie和session"}},[s._v("#")]),s._v(" cookie和session")]),s._v(" "),a("h3",{attrs:{id:"cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[s._v("#")]),s._v(" cookie")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("增删改")]),s._v(" "),a("ul",[a("li",[a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code")]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"})])])]),s._v(" "),a("h1",{attrs:{id:"增加cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#增加cookie"}},[s._v("#")]),s._v(" 增加cookie")]),s._v(" "),a("p",[s._v('response.set_cookie(key,value,max_age==None,expires=None)\n"""\nkey:cookie的名字\nvalue:cookie的值\nmax_age:过期时间,单位秒,不指定时关闭浏览器清除\nexpires:具体过期时间\n"""')]),s._v(" "),a("h1",{attrs:{id:"删除cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除cookie"}},[s._v("#")]),s._v(" 删除cookie")]),s._v(" "),a("p",[s._v("response.delete_cookie(key)")]),s._v(" "),a("h1",{attrs:{id:"修改cookie"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改cookie"}},[s._v("#")]),s._v(" 修改cookie")]),s._v(" "),a("p",[s._v("response.set_cookie(key,value,max_age==None,expires=None)")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n  > 这里的response可以是HttpResponse,也可以是render 也可以是HttpResponse的子类(如:JsonResponse)\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("查")]),s._v(" "),a("ul",[a("li",[a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code")]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"})])])]),s._v(" "),a("p",[s._v("value = request.COOKIES.get(key, 查不到时的值)")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("h3",{attrs:{id:"session"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#session"}},[s._v("#")]),s._v(" session")]),s._v(" "),a("blockquote",[a("p",[s._v("使用session时,需要在setting.py中配置")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("INSTALLED_APPS "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用 sessions 应用")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.contrib.sessions'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nMIDDLEWARE "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用 Session 中间件")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'django.contrib.sessions.middleware.SessionMiddleware'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# setting.py中可以设置session相关")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" SESSION_COOKIE_AGE\n作用"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 指定sessionid在cookies中的保存时长"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("默认是"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("周"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("，如下"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\nSESSION_COOKIE_AGE "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v(" SESSION_EXPIRE_AT_BROWSER_CLOSE "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("True")]),s._v("\n设置只要浏览器关闭时"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("session就失效"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("默认为"),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("False")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])])]),s._v(" "),a("ul",[a("li",[a("p",[s._v("增删改查")]),s._v(" "),a("ul",[a("li",[a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code")]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"})])])]),s._v(" "),a("h1",{attrs:{id:"增-改"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#增-改"}},[s._v("#")]),s._v(" 增/改")]),s._v(" "),a("p",[s._v("request.session['KEY'] = VALUE")]),s._v(" "),a("h1",{attrs:{id:"删"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删"}},[s._v("#")]),s._v(" 删")]),s._v(" "),a("p",[s._v("del request.session['KEY']")]),s._v(" "),a("h1",{attrs:{id:"查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查"}},[s._v("#")]),s._v(" 查")]),s._v(" "),a("p",[s._v("VALUE = request.session['KEY']\nVALUE = request.session.get('KEY', 缺省值)")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("blockquote",[a("p",[s._v("注:使用session时,需要迁移数据库:makemigrations,migrate")])])])}),[],!1,null,null,null);e.default=n.exports}}]);