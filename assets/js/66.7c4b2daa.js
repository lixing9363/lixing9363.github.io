(window.webpackJsonp=window.webpackJsonp||[]).push([[66],{489:function(s,t,a){"use strict";a.r(t);var r=a(24),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"restful-representational-state-transfer-只用在前后端分离场景下后端api的设计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#restful-representational-state-transfer-只用在前后端分离场景下后端api的设计"}},[s._v("#")]),s._v(" RESTful -Representational State Transfer---------------只用在前后端分离场景下后端API的设计")]),s._v(" "),a("p",[s._v("@[toc]")]),s._v(" "),a("h2",{attrs:{id:"_1-1-什么是restful"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-什么是restful"}},[s._v("#")]),s._v(" 1.1，什么是RESTful")]),s._v(" "),a("p",[s._v("​\t1，资源 "),a("strong",[s._v("（Resources）")])]),s._v(" "),a("p",[s._v("​\t\t"),a("strong",[s._v("网络上的一个实体，或者说是网络上的一个具体信息")]),s._v("，并且每个资源都有一个独一无二得URI与之对应；获取资源-直接访问URI即可")]),s._v(" "),a("p",[s._v("​\t2，"),a("strong",[s._v("表现层（Representation）")])]),s._v(" "),a("p",[s._v("​\t\t如何去表现资源  - 即资源得表现形式；如HTML , xml  , JPG , json等")]),s._v(" "),a("p",[s._v("​\t3，"),a("strong",[s._v("状态转化（State Transfer）")])]),s._v(" "),a("p",[s._v("​\t\t访问一个URI即发生了一次 客户端和服务端得交互；此次交互将会涉及到数据和状态得变化")]),s._v(" "),a("p",[s._v("​\t\t客户端需要通过某些方式触发具体得变化  -  HTTP method 如 GET， POST，PUT，PATCH，DELETE 等")]),s._v(" "),a("h2",{attrs:{id:"_1-2-restful的特征"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-restful的特征"}},[s._v("#")]),s._v(" 1.2 RESTful的特征")]),s._v(" "),a("p",[s._v("​\t1，每一个URI代表一种资源")]),s._v(" "),a("p",[s._v("​\t2，客户端和服务器端之前传递着资源的某种表现")]),s._v(" "),a("p",[s._v("​\t3，客户端通过HTTP的几个动作 对 资源进行操作 - 发生‘状态转化’")]),s._v(" "),a("h2",{attrs:{id:"_1-3-如何设计符合restful-特征的api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-如何设计符合restful-特征的api"}},[s._v("#")]),s._v(" 1.3 如何设计符合RESTful 特征的API")]),s._v(" "),a("p",[s._v("​\t1，协议  - http/https")]),s._v(" "),a("p",[s._v("​\t2，域名：")]),s._v(" "),a("p",[s._v("​\t\t域名中体现出api字样，如")]),s._v(" "),a("p",[s._v("​\t\thttps://api.example.com")]),s._v(" "),a("p",[s._v("​\t\tor")]),s._v(" "),a("p",[s._v("​\t\thttps://example.org/api/")]),s._v(" "),a("p",[s._v("​\t3,  版本:")]),s._v(" "),a("p",[s._v("​\t\thttps://api.example.com/v1/")]),s._v(" "),a("p",[s._v("​\t4，路径 -")]),s._v(" "),a("p",[s._v("​\t\t路径中避免使用动词，资源用名词表示，案例如下")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("users\nhttps"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("//")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("com"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("v1"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("animals\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("​\t5，HTTP动词语义")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("GET（SELECT）：从服务器取出资源（一项或多项）。")])]),s._v(" "),a("li",[a("p",[s._v("POST（CREATE）：在服务器新建一个资源。")])]),s._v(" "),a("li",[a("p",[s._v("PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）。")])]),s._v(" "),a("li",[a("p",[s._v("PATCH（UPDATE）：在服务器更新资源（客户端提供改变的属性）。")])]),s._v(" "),a("li",[a("p",[s._v("DELETE（DELETE）：从服务器删除资源。")]),s._v(" "),a("p",[s._v("具体案例如下：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("GET "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zoos：列出所有动物园\nPOST "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zoos：新建一个动物园\nGET "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zoos"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ID：获取某个指定动物园的信息\nPUT "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zoos"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ID：更新某个指定动物园的信息（提供该动物园的全部信息）\nPATCH "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zoos"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ID：更新某个指定动物园的信息（提供该动物园的部分信息）\nDELETE "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zoos"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ID：删除某个动物园\nGET "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zoos"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ID"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("animals：列出某个指定动物园的所有动物\nDELETE "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("zoos"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ID"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("animals"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("ID：删除某个指定动物园的指定动物\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])])]),s._v(" "),a("p",[s._v("​\t6，巧用查询字符串")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("?limit"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("：指定返回记录的数量\n?offset"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("：指定返回记录的开始位置。\n?page"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("per_page"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("：指定第几页，以及每页的记录数。\n?sortby"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("order"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("asc：指定返回结果按照哪个属性排序，以及排序顺序。\n?type_id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("：指定筛选条件\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("​")]),s._v(" "),a("p",[s._v("​\t7，状态码")]),s._v(" "),a("p",[s._v("​\t\t1，用HTTP响应码表达 此次请求结果，例如")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v(" OK "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("GET"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：服务器成功返回用户请求的数据\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("201")]),s._v(" CREATED "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("POST"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("PUT"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("PATCH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：用户新建或修改数据成功。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("202")]),s._v(" Accepted "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：表示一个请求已经进入后台排队（异步任务）\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("204")]),s._v(" NO CONTENT "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("DELETE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：用户删除数据成功。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v(" INVALID REQUEST "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("POST"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("PUT"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("PATCH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：用户发出的请求有错误，服务器没有进行新建或修改数据的操作，该操作是幂等的。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("401")]),s._v(" Unauthorized "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：表示用户没有权限（令牌、用户名、密码错误）。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("403")]),s._v(" Forbidden "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 表示用户得到授权（与"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("401")]),s._v("错误相对），但是访问是被禁止的。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("404")]),s._v(" NOT FOUND "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：用户发出的请求针对的是不存在的记录，服务器没有进行操作，该操作是幂等的。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("406")]),s._v(" Not Acceptable "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("GET"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：用户请求的格式不可得（比如用户请求JSON格式，但是只有XML格式）。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("410")]),s._v(" Gone "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("GET"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：用户请求的资源被永久删除，且不会再得到的。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("422")]),s._v(" Unprocesable entity "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("POST"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("PUT"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("PATCH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" 当创建一个对象时，发生一个验证错误。\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v(" INTERNAL SERVER ERROR "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("：服务器发生错误\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("​\t\t2, 自定义内部code 进行响应")]),s._v(" "),a("p",[s._v("​\t\t如 返回结构如下  {'code':200,  'data': {}, 'error': xxx}")]),s._v(" "),a("p",[s._v("​\t8，返回结果")]),s._v(" "),a("p",[s._v("​\t根据HTTP 动作的不同，返回结果的结构也有所不同")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("GET "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("users：返回资源对象的列表（数组）\nGET "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("users"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("guoxiaonao：返回单个资源对象\nPOST "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("users：返回新生成的资源对象\nPUT "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("users"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("guoxiaonao：返回完整的资源对象\nPATCH "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("users"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("guoxiaonao：返回完整的资源对象\nDELETE "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("users"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("guoxiaonao：返回一个空文档\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);