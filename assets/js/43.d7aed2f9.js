(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{466:function(s,a,e){"use strict";e.r(a);var t=e(24),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"docker安装elasticsearch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker安装elasticsearch"}},[s._v("#")]),s._v(" docker安装elasticsearch")]),s._v(" "),e("h3",{attrs:{id:"安装elasticsearch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装elasticsearch"}},[s._v("#")]),s._v(" 安装elasticsearch")]),s._v(" "),e("h4",{attrs:{id:"_1-下载镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载镜像"}},[s._v("#")]),s._v(" 1. 下载镜像")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ docker pull elasticsearch:7.7.0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("安装7.7.0版")])]),s._v(" "),e("h4",{attrs:{id:"_2-启动容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动容器"}},[s._v("#")]),s._v(" 2. 启动容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ docker run --name elasticsearch -d -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ES_JAVA_OPTS")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"-Xms512m -Xmx512m"')]),s._v(" -e "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"discovery.type=single-node"')]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9200")]),s._v(":9200 -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9300")]),s._v(":9300 elasticsearch:7.7.0\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("blockquote",[e("p",[s._v("访问 http://192.168.1.4:9200/ 可查看是否安装成功")])]),s._v(" "),e("h3",{attrs:{id:"安装elasticsearch-head"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装elasticsearch-head"}},[s._v("#")]),s._v(" 安装elasticsearch-head")]),s._v(" "),e("h4",{attrs:{id:"_1-下载镜像-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载镜像-2"}},[s._v("#")]),s._v(" 1. 下载镜像")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ docker pull mobz/elasticsearch-head:5\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h4",{attrs:{id:"_2-启动容器-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-启动容器-2"}},[s._v("#")]),s._v(" 2. 启动容器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建容器")]),s._v("\ndocker create --name elasticsearch-head -p "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("9100")]),s._v(":9100 mobz/elasticsearch-head:5\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#启动容器")]),s._v("\ndocker start elasticsearch-head\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("blockquote",[e("p",[s._v("访问 http://192.168.1.4:9100/可查看安装是否成功")])]),s._v(" "),e("ul",[e("li",[e("p",[s._v("如果连接不成功, 查看浏览器network, 是否是跨域问题,如果是,则:")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ docker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it elasticsearch /bin/bash\n\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" config/elasticsearch.yml\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 添加如下内容")]),s._v("\nhttp.cors.enabled: "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" \nhttp.cors.allow-origin: "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"*"')]),s._v("\n\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n$ docker restart elasticsearch\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])])]),s._v(" "),e("li",[e("p",[s._v("点击数据浏览,如果发现_search请求失败, 需要配置vendor.js")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ docker "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it elasticsearch-head /bin/bash\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /usr/src/app/_site/vendor.js\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("6886")]),s._v("行:\n将"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"application/x-www-form-urlencoded"')]),s._v("\n改为"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"application/json;charset=UTF-8"')]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("7574")]),s._v("行:\n将"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"application/x-www-form-urlencoded"')]),s._v("\n改为"),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"application/json;charset=UTF-8"')]),s._v("\n\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n$ docker restart elasticsearch-hea\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br")])])])]),s._v(" "),e("h3",{attrs:{id:"安装ik分词"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装ik分词"}},[s._v("#")]),s._v(" 安装ik分词")]),s._v(" "),e("p",[s._v("https://github.com/medcl/elasticsearch-analysis-ik")]),s._v(" "),e("p",[s._v("release中下载对应版本的分词插件")]),s._v(" "),e("p",[s._v("ftp传入服务器")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" elasticsearch-analysis-ik-7.7.0.zip -d ./ik\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("777")]),s._v(" ik/\n$ docker "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" ./ik elasticsearch:/usr/share/elasticsearch/plugins\n$ docker restart elasticsearch\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);